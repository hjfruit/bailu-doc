"use strict";(self.webpackChunk_fruits_chain_react_bailu=self.webpackChunk_fruits_chain_react_bailu||[]).push([[456],{74296:function(Z,I,i){i.r(I),i.d(I,{demos:function(){return H}});var r=i(15009),B=i.n(r),te=i(99289),Q=i.n(te),K=i(67294),H={"src-pro-table-demo-base":{component:K.memo(K.lazy(function(){return Promise.all([i.e(1734),i.e(4550),i.e(2433)]).then(i.bind(i,41254))})),asset:{type:"BLOCK",id:"src-pro-table-demo-base",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:i(34585).Z},antd:{type:"NPM",value:"4.24.12"},react:{type:"NPM",value:"18.1.0"},"@fruits-chain/react-bailu":{type:"NPM",value:"0.2.26"}},entry:"index.tsx",description:"\u9884\u7F6E\u4E86\u51E0\u79CD\u6570\u636E\u683C\u5F0F\u5316\u65B9\u6848",title:"\u57FA\u7840\u7528\u6CD5"},context:{antd:i(26868),react:i(67294),"@fruits-chain/react-bailu":i(31081)},renderOpts:{compile:function(){var w=Q()(B()().mark(function G(){var j,V=arguments;return B()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,i.e(7335).then(i.bind(i,37335));case 2:return p.abrupt("return",(j=p.sent).default.apply(j,V));case 3:case"end":return p.stop()}},G)}));function U(){return w.apply(this,arguments)}return U}()}},"src-pro-table-demo-resizable-header":{component:K.memo(K.lazy(function(){return Promise.all([i.e(1734),i.e(4550),i.e(2433)]).then(i.bind(i,93851))})),asset:{type:"BLOCK",id:"src-pro-table-demo-resizable-header",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:i(41191).Z},antd:{type:"NPM",value:"4.24.12"},react:{type:"NPM",value:"18.1.0"},"use-antd-resizable-header":{type:"NPM",value:"2.9.5"},"@fruits-chain/react-bailu":{type:"NPM",value:"0.2.26"}},entry:"index.tsx",description:"\u914D\u5408 use-antd-resizable-header \u4E00\u8D77\u4F7F\u7528",title:"use-antd-resizable-header"},context:{antd:i(26868),react:i(67294),"use-antd-resizable-header":i(60458),"@fruits-chain/react-bailu":i(31081)},renderOpts:{compile:function(){var w=Q()(B()().mark(function G(){var j,V=arguments;return B()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,i.e(7335).then(i.bind(i,37335));case 2:return p.abrupt("return",(j=p.sent).default.apply(j,V));case 3:case"end":return p.stop()}},G)}));function U(){return w.apply(this,arguments)}return U}()}}}},87497:function(Z,I,i){i.r(I),i.d(I,{texts:function(){return r}});const r=[{value:"0.2.0+",paraId:0},{value:"\u5C55\u793A\u884C\u5217\u6570\u636E\u3002",paraId:1,tocIndex:0},{value:"\u5F53\u6709\u5927\u91CF\u7ED3\u6784\u5316\u7684\u6570\u636E\u9700\u8981\u5C55\u73B0\u65F6",paraId:2,tocIndex:1},{value:"\u5F53\u9700\u8981\u5BF9\u6570\u636E\u8FDB\u884C\u6392\u5E8F\u3001\u641C\u7D22\u3001\u5206\u9875\u3001\u81EA\u5B9A\u4E49\u64CD\u4F5C\u7B49\u590D\u6742\u884C\u4E3A\u65F6\u3002",paraId:2,tocIndex:1},{value:"\u5728\u539F ",paraId:3,tocIndex:1},{value:"Table",paraId:3,tocIndex:1},{value:" \u7EC4\u4EF6\u4E0A\u8FDB\u884C\u6269\u5C55\uFF0C",paraId:3,tocIndex:1},{value:"columns",paraId:3,tocIndex:1},{value:" \u6570\u636E\u4E0A\u65B0\u589E ",paraId:3,tocIndex:1},{value:"valueType",paraId:3,tocIndex:1},{value:"\u3001",paraId:3,tocIndex:1},{value:"options",paraId:3,tocIndex:1},{value:"\u3001",paraId:3,tocIndex:1},{value:"dateFormat",paraId:3,tocIndex:1},{value:"\u3001",paraId:3,tocIndex:1},{value:"limitDecimals",paraId:3,tocIndex:1},{value:"\u3001",paraId:3,tocIndex:1},{value:"limitDecimalsRetain",paraId:3,tocIndex:1},{value:"\u3001",paraId:3,tocIndex:1},{value:"thousands",paraId:3,tocIndex:1},{value:" \u7B49\u5B57\u6BB5\u3002",paraId:3,tocIndex:1},{value:"valueType\uFF0C\u5F53\u524D\u6570\u636E\u683C\u5F0F\uFF0C",paraId:4,tocIndex:1},{value:"'checkbox' | 'date' | 'dateRange' | 'number' | 'radio' | 'select' | 'switch' | 'text' | 'textarea'",paraId:4,tocIndex:1},{value:"options\uFF0C",paraId:4,tocIndex:1},{value:"{value:T;label:string}[]",paraId:4,tocIndex:1},{value:"\uFF0C",paraId:4,tocIndex:1},{value:"checkbox",paraId:4,tocIndex:1},{value:"\u3001",paraId:4,tocIndex:1},{value:"radio",paraId:4,tocIndex:1},{value:"\u3001",paraId:4,tocIndex:1},{value:"select",paraId:4,tocIndex:1},{value:" \u7C7B\u578B\u6570\u636E\u7684\u5168\u91CF\u5019\u9009\u9879\uFF0C\u901A\u8FC7\u5B57\u6BB5\u503C\u5151\u6362\u51FA\u6587\u6848\u63CF\u8FF0",paraId:4,tocIndex:1},{value:"dateFormat\uFF0C",paraId:4,tocIndex:1},{value:"'Y' | 'Y-M' | 'Y-D' | 'Y-h' | 'Y-m' | 'Y-s'",paraId:4,tocIndex:1},{value:"\uFF0C",paraId:4,tocIndex:1},{value:"date",paraId:4,tocIndex:1},{value:"\u3001",paraId:4,tocIndex:1},{value:"dateRange",paraId:4,tocIndex:1},{value:" \u7C7B\u578B\u683C\u5F0F\u5316\u6A21\u677F\uFF0C\u5E74\u6708\u65E5\u65F6\u5206\u79D2",paraId:4,tocIndex:1},{value:"limitDecimals\u3001limitDecimalsRetain\u3001thousands\uFF0C\u5BF9\u6570\u5B57\u8FDB\u884C\u683C\u5F0F\u5316\uFF0C\u4FDD\u7559 N \u4F4D\u5C0F\u6570\u3001\u5F3A\u5236\u4FDD\u7559\u5C0F\u6570\u3001\u5343\u5206\u4F4D",paraId:4,tocIndex:1}]},34585:function(Z,I){I.Z=`import { message } from 'antd'
import React from 'react'

import {
  ProTable,
  ProButton,
  ProField,
  Layout,
  ActionText,
  ProSpace,
} from '@fruits-chain/react-bailu'
import type { ProTableColumnType } from '@fruits-chain/react-bailu'

type DemoData = {
  id: number
  title?: string
  classify?: number
  time?: number
  times?: [number, number]
  checkbox?: number[]
  yuan?: number
  status?: 'normal' | 'soldOut'
}

const dataArray = new Array(8).fill(0)

const optionsClassify: { value: number; label: string }[] = dataArray.map(
  (_, index) => ({
    value: index,
    label: \`classify => \${index}\`,
  }),
)

const datas: DemoData[] = dataArray.map((_, index) => ({
  id: index,
  title: index === 2 ? undefined : \`\u6807\u9898-\${index}\`,
  classify: index === 3 ? undefined : index,
  time: new Date().getTime() + index * 100000000,
  times:
    index > 0
      ? index > 1
        ? [
            new Date().getTime() - 60 * 60 * 60 * 12 * 1000,
            new Date().getTime(),
          ]
        : ([] as unknown as [number, number])
      : undefined,
  checkbox: index > 0 ? (index > 1 ? [index - 1, index] : []) : undefined,
  yuan: index === 3 ? undefined : +(Math.random() * 10000).toFixed(6),
  status: index === 3 ? undefined : Math.random() >= 0.5 ? 'normal' : 'soldOut',
}))

const Demo: React.FC = () => {
  const columns: ProTableColumnType<DemoData>[] = [
    {
      dataIndex: 'title',
      title: '\u7EAF\u6587\u6848',
    },
    {
      dataIndex: 'classify',
      title: '\u4E0B\u62C9\u9009\u9879',
      valueType: 'select',
      options: optionsClassify,
    },
    {
      dataIndex: 'classify',
      title: '\u5355\u9009',
      titleTooltip: '\u4E0B\u62C9\u9009\u9879\u3001\u5355\u9009\u4E24\u4E2A\u7684\u8868\u73B0\u7ED3\u679C\u662F\u5DEE\u4E0D\u591A\u7684',
      valueType: 'radio',
      options: optionsClassify,
    },
    {
      dataIndex: 'time',
      title: '\u65F6\u95F4',
      valueType: 'date',
    },
    {
      dataIndex: 'time',
      title: () => '\u65F6\u95F42',
      titleTooltip: '\u81EA\u5B9A\u4E49\u65F6\u95F4 Y-m',
      valueType: 'date',
      dateFormat: 'Y-m',
      sorter: true,
    },
    {
      dataIndex: 'times',
      title: '\u65F6\u95F4\u6BB5',
      titleTooltip: '\u7ED9\u7A7A\u6570\u636E\u4F1A\u9020\u6210\u7528\u5F53\u524D\u65F6\u95F4\u683C\u5F0F\u5316\u6570\u636E',
      valueType: 'dateRange',
      width: 140,
    },
    {
      dataIndex: 'times',
      title: '\u65F6\u95F4\u6BB52',
      valueType: 'dateRange',
      dateFormat: 'Y-m',
      width: 180,
    },
    {
      dataIndex: 'checkbox',
      title: '\u591A\u9009',
      valueType: 'checkbox',
      options: optionsClassify,
    },
    {
      dataIndex: 'yuan',
      title: '\u91D1\u989D',
      valueType: 'number',
      limitDecimals: 2,
      limitDecimalsRetain: true,
      width: 120,
      align: 'right',
    },
    {
      dataIndex: 'yuan',
      title: '\u91D1\u989D2',
      valueType: 'number',
      limitDecimals: 2,
      limitDecimalsRetain: true,
      thousands: true,
      width: 120,
      align: 'right',
    },
    {
      dataIndex: 'status',
      title: '\u72B6\u6001',
      valueType: 'switch',
      width: 120,
    },
    {
      dataIndex: 'status',
      title: '\u72B6\u60012',
      width: 120,
      render: value => {
        return (
          <ProField.Switch
            value={value}
            activeValue="normal"
            inactiveValue="soldOut"
            checkedChildren="\u5728\u552E"
            unCheckedChildren="\u4E0B\u67B6"
            action={v => {
              console.log('\u72B6\u60012 v => ', v)
              return new Promise<void>(resolve => {
                setTimeout(() => {
                  resolve()
                  console.log('\u5237\u65B0\u6570\u636E')
                }, 400)
              })
            }}
          />
        )
      },
    },
    {
      title: '\u64CD\u4F5C',
      width: 140,
      fixed: 'right',
      render: () => {
        return (
          <ActionText.Group>
            <ActionText>\u8BE6\u60C5</ActionText>
            <ActionText>\u7F16\u8F91</ActionText>
            <ActionText>\u4E0B\u8F7D</ActionText>
            <ActionText.Popconfirm
              status="warning"
              title="\u786E\u5B9A\u8981\u4E0B\u67B6\u8FD9\u4E2A\u6570\u636E?"
              onConfirm={() => {
                message.success('\u5DF2\u4E0B\u67B6')
              }}>
              \u4E0B\u67B6
            </ActionText.Popconfirm>
            <ActionText.Modal
              status="danger"
              title="\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E"
              onOk={() => {
                message.success('\u5DF2\u5220\u9664')
              }}>
              \u5220\u9664
            </ActionText.Modal>
          </ActionText.Group>
        )
      },
    },
  ]

  return (
    <ProSpace direction="vertical">
      <Layout.Content>
        <ProTable
          columns={columns}
          dataSource={datas}
          rowKey="id"
          scroll={{ x: 2000 }}
        />
      </Layout.Content>

      <Layout.Content>
        <ProTable
          columns={columns}
          dataSource={datas}
          rowKey="id"
          scroll={{ x: 2000 }}
          tools={[
            <ProButton key="1" type="primary">
              \u65B0\u589E
            </ProButton>,
            <ProButton key="2" type="default">
              \u5220\u9664
            </ProButton>,
          ]}
          renderSetting={() => {
            return (
              <ProSpace>
                <ProButton type="primary">\u65B0\u589E2</ProButton>
                <ProButton type="default">\u5220\u96642</ProButton>
              </ProSpace>
            )
          }}
        />
      </Layout.Content>
    </ProSpace>
  )
}

export default Demo
`},41191:function(Z,I){I.Z=`import { message } from 'antd'
import React, { useMemo } from 'react'
import { useAntdResizableHeader } from 'use-antd-resizable-header'

import {
  ProTable,
  ProField,
  Layout,
  ActionText,
} from '@fruits-chain/react-bailu'
import type { ProTableColumnType } from '@fruits-chain/react-bailu'

type DemoData = {
  id: number
  title?: string
  classify?: number
  time?: number
  times?: [number, number]
  checkbox?: number[]
  yuan?: number
  status?: 'normal' | 'soldOut'
}

const dataArray = new Array(8).fill(0)

const optionsClassify: { value: number; label: string }[] = dataArray.map(
  (_, index) => ({
    value: index,
    label: \`classify => \${index}\`,
  }),
)

const datas: DemoData[] = dataArray.map((_, index) => ({
  id: index,
  title: index === 2 ? undefined : \`\u6807\u9898-\${index}\`,
  classify: index === 3 ? undefined : index,
  time: new Date().getTime() + index * 100000000,
  times:
    index > 0
      ? index > 1
        ? [
            new Date().getTime() - 60 * 60 * 60 * 12 * 1000,
            new Date().getTime(),
          ]
        : ([] as unknown as [number, number])
      : undefined,
  checkbox: index > 0 ? (index > 1 ? [index - 1, index] : []) : undefined,
  yuan: index === 3 ? undefined : +(Math.random() * 10000).toFixed(6),
  status: index === 3 ? undefined : Math.random() >= 0.5 ? 'normal' : 'soldOut',
}))

const Demo: React.FC = () => {
  const columns: ProTableColumnType<DemoData>[] = useMemo(
    () => [
      {
        dataIndex: 'title',
        title: '\u7EAF\u6587\u6848',
        ellipsis: true,
        width: 40,
      },
      {
        dataIndex: 'classify',
        title: '\u4E0B\u62C9\u9009\u9879',
        valueType: 'select',
        options: optionsClassify,
      },
      {
        dataIndex: 'classify',
        title: '\u5355\u9009',
        titleTooltip: '\u4E0B\u62C9\u9009\u9879\u3001\u5355\u9009\u4E24\u4E2A\u7684\u8868\u73B0\u7ED3\u679C\u662F\u5DEE\u4E0D\u591A\u7684',
        valueType: 'radio',
        options: optionsClassify,
      },
      {
        dataIndex: 'time',
        title: '\u65F6\u95F4',
        valueType: 'date',
      },
      {
        dataIndex: 'time',
        title: () => '\u65F6\u95F42',
        titleTooltip: '\u81EA\u5B9A\u4E49\u65F6\u95F4 Y-m',
        valueType: 'date',
        dateFormat: 'Y-m',
        sorter: true,
      },
      {
        dataIndex: 'times',
        title: '\u65F6\u95F4\u6BB5',
        titleTooltip: '\u7ED9\u7A7A\u6570\u636E\u4F1A\u9020\u6210\u7528\u5F53\u524D\u65F6\u95F4\u683C\u5F0F\u5316\u6570\u636E',
        valueType: 'dateRange',
        width: 140,
      },
      {
        dataIndex: 'times',
        title: '\u65F6\u95F4\u6BB52',
        valueType: 'dateRange',
        dateFormat: 'Y-m',
        width: 180,
      },
      {
        dataIndex: 'checkbox',
        title: '\u591A\u9009',
        valueType: 'checkbox',
        options: optionsClassify,
      },
      {
        dataIndex: 'yuan',
        title: '\u91D1\u989D',
        valueType: 'number',
        limitDecimals: 2,
        limitDecimalsRetain: true,
        width: 120,
        align: 'right',
        ellipsis: true,
      },
      {
        dataIndex: 'yuan',
        title: '\u91D1\u989D2',
        valueType: 'number',
        limitDecimals: 2,
        limitDecimalsRetain: true,
        thousands: true,
        width: 120,
        align: 'right',
      },
      {
        dataIndex: 'status',
        title: '\u72B6\u6001',
        valueType: 'switch',
        width: 120,
      },
      {
        dataIndex: 'status',
        title: '\u72B6\u60012',
        width: 120,
        render: value => {
          return (
            <ProField.Switch
              value={value}
              activeValue="normal"
              inactiveValue="soldOut"
              checkedChildren="\u5728\u552E"
              unCheckedChildren="\u4E0B\u67B6"
              action={v => {
                console.log('\u72B6\u60012 v => ', v)
                return new Promise<void>(resolve => {
                  setTimeout(() => {
                    resolve()
                    console.log('\u5237\u65B0\u6570\u636E')
                  }, 400)
                })
              }}
            />
          )
        },
      },
      {
        title: '\u64CD\u4F5C',
        width: 140,
        fixed: 'right',
        render: () => {
          return (
            <ActionText.Group>
              <ActionText>\u8BE6\u60C5</ActionText>
              <ActionText>\u7F16\u8F91</ActionText>
              <ActionText>\u4E0B\u8F7D</ActionText>
              <ActionText.Popconfirm
                status="warning"
                title="\u786E\u5B9A\u8981\u4E0B\u67B6\u8FD9\u4E2A\u6570\u636E?"
                onConfirm={() => {
                  message.success('\u5DF2\u4E0B\u67B6')
                }}>
                \u4E0B\u67B6
              </ActionText.Popconfirm>
              <ActionText.Modal
                status="danger"
                title="\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E"
                onOk={() => {
                  message.success('\u5DF2\u5220\u9664')
                }}>
                \u5220\u9664
              </ActionText.Modal>
            </ActionText.Group>
          )
        },
      },
    ],
    [],
  )
  const { components, resizableColumns, tableWidth } = useAntdResizableHeader({
    columns: columns,
    // \u4FDD\u5B58\u62D6\u62FD\u5BBD\u5EA6\u81F3\u672C\u5730localStorage
    // columnsState: {
    //   persistenceKey: 'localKey',
    //   persistenceType: 'localStorage',
    // },
  })

  return (
    <Layout.Content>
      <ProTable
        columns={resizableColumns}
        components={components}
        dataSource={datas}
        scroll={{ x: tableWidth }}
        rowKey="id"
        setting={[]}
      />
    </Layout.Content>
  )
}

export default Demo
`},60458:function(Z,I,i){Object.defineProperty(I,"__esModule",{value:!0});var r=i(67294),B=i(1706),te=i(99612),Q=i(91296),K=i(93096);function H(e){return e&&e.__esModule?e:{default:e}}var w=H(r),U=H(Q),G=H(K);i(16863);var j=Object.defineProperty,V=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,se=(e,a,n)=>a in e?j(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,A=(e,a)=>{for(var n in a||(a={}))de.call(a,n)&&se(e,n,a[n]);if(p)for(var n of p(a))ue.call(a,n)&&se(e,n,a[n]);return e},E=(e,a)=>V(e,ae(a));function re(e){return typeof e=="string"}function ce(e){return typeof e!="object"||e===null||(!Array.isArray(e)||!e.length)&&!Object.keys(e).length}var Ie=()=>{const e=r.useRef(!1);return r.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e};function ie(e){const a=Ie(),[n,o]=r.useState(e);return[n,r.useCallback(m=>{a.current||o(m)},[])]}var Te=r.memo(e=>{const a=e,{width:n,minWidth:o,maxWidth:m,resizable:s,hideInTable:P,onResize:C,onResizeStart:x,onResizeEnd:T,onMount:y,triggerRender:c,className:h,style:W,onClick:$,children:L,rowSpan:q,colSpan:_,title:ee,scope:le,tooltipRender:S}=a,ne=((u,l)=>{var t={};for(var d in u)de.call(u,d)&&l.indexOf(d)<0&&(t[d]=u[d]);if(u!=null&&p)for(var d of p(u))l.indexOf(d)<0&&ue.call(u,d)&&(t[d]=u[d]);return t})(a,["width","minWidth","maxWidth","resizable","hideInTable","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title","scope","tooltipRender"]),[N,F]=ie(0),{overflow:J,ref:oe}=function(u){const[l,t]=r.useState(!1),d=r.useRef(),v=r.useCallback(()=>{if(d.current===void 0)return;const b=d.current.offsetWidth<d.current.scrollWidth||d.current.offsetHeight<d.current.scrollHeight;b!==l&&(t(b),u.onChange&&u.onChange(b))},[d.current,u.onChange,t,l]);return te.useResizeDetector({targetRef:d,onResize:v}),r.useEffect(()=>{v()}),{overflow:l,ref:d}}({});if(r.useEffect(()=>{n&&(F(n),y==null||y(n,{overflow:J}))},[c]),r.useEffect(()=>{n&&F(n)},[F,n]),P)return null;if(!n||Number.isNaN(Number(n))||s===!1)return w.default.createElement("th",E(A({},ne),{"data-arh-disable":"true",style:W,className:h,onClick:$,rowSpan:q,colSpan:_}),w.default.createElement("span",{title:ee},L));const k=u=>{document.body.style.userSelect=u?"none":"",document.body.style.pointerEvents=u?"none":"",document.documentElement.style.cursor=u?"col-resize":""},Y=w.default.createElement("div",E(A({},ne),{ref:S?oe:null,className:"resizable-title"+((()=>{var u,l;if(Array.isArray(L)){const t=L[L.length-1];if(t)return re(t)||((u=t.props)==null?void 0:u.ellipsis)||re((l=t.props)==null?void 0:l.label)}return!1})()?" ellipsis":""),children:L}));return w.default.createElement("th",{scope:le,className:`resizable-container ${h}`,style:E(A({},W),{overflow:"unset"}),"data-uarh-enable":"true",onClick:$,rowSpan:q,colSpan:_},w.default.createElement(B.Resizable,{className:"resizable-box",width:N,minConstraints:[o,0],maxConstraints:[m,0],height:0,handle:w.default.createElement("div",{className:"resizable-handler",onClick:u=>{u.stopPropagation()}},w.default.createElement("div",{className:"resizable-line"})),draggableOpts:{enableUserSelectHack:!1},onResizeStart:({},u)=>{F(u.size.width),k(!0),x==null||x(u.size.width)},onResize:({},u)=>{F(u.size.width)},onResizeStop:()=>{N<=0||(C(N,{overflow:J}),k(!1),T==null||T(N))}},w.default.createElement("div",{style:{width:N,height:"100%"}})),S?S({children:Y,open:!!J&&void 0,title:L}):Y)});function me(e,a){const{current:n}=r.useRef({deps:a,obj:void 0,initialized:!1});return n.initialized!==!1&&function(o,m){if(o===m)return!0;for(let s=0;s<o.length;s++)if(o[s]!==m[s])return!1;return!0}(n.deps,a)||(n.deps=a,n.obj=e(),n.initialized=!0),n.obj}var D="dataIndex",fe="resizable-table-id";function pe(e){const a=e==null?void 0:e.filter(n=>!ce(n));return a==null?void 0:a.map((n,o)=>{var m,s;return E(A({},n),{children:(m=n==null?void 0:n.children)!=null&&m.length?pe(n.children):void 0,[D]:n[D]||n.key||(s=`${n.title}-${o}`,`${fe}-${s}`)})})}function ge(e){return r.useMemo(()=>pe(e),[e])||e}var he=typeof window=="undefined"||!window.document||!window.document.createElement?r.useEffect:r.useLayoutEffect;function X(e){typeof e!="function"&&console.error("useMemoizedFn expected parameter is a function, got "+typeof e);const a=r.useRef(e);a.current=r.useMemo(()=>e,[e]);const n=r.useRef();return n.current||(n.current=function(...o){return a.current.apply(this,o)}),n.current}function ve(e,a,n){const o=e;return Array.isArray(o)&&Array.isArray(a)&&o.forEach((m,s)=>{var P,C;m!=null&&m.children?ve(m.children,(P=a[s])==null?void 0:P.children,n):o[s][n]=((C=a.find(x=>x.dataIndex===o[s].dataIndex))==null?void 0:C[n])||o[s][n]}),o}function we({columnsState:e,resizableColumns:a,columns:n}){const o=ge(n),m=X(()=>{var x;const{persistenceType:T,persistenceKey:y}=e||{};if(!y||!T||typeof window=="undefined")return o;const c=window[T];try{const h=(x=JSON.parse((c==null?void 0:c.getItem(y))||"{}"))==null?void 0:x.resizableColumns;return ve(o||[],h,"width")}catch(h){console.error(h)}}),[s,P]=r.useState(m);r.useEffect(()=>{P(m())},[o]),r.useEffect(()=>{const{persistenceType:x,persistenceKey:T}=e||{};if(!T||!x||!(a!=null&&a.length)||typeof window=="undefined")return;const y=window[x];try{y.setItem(T,JSON.stringify(E(A({},JSON.parse((y==null?void 0:y.getItem(T))||"{}")),{resizableColumns:a.map(c=>{const h={dataIndex:c.dataIndex,key:c.key,width:c.width,children:c.children};return re(c.title)&&(h.title=c.title),h})})))}catch(c){console.error(c)}},[a]);const C=X(()=>{P([...o||[]])});return{localColumns:r.useMemo(()=>s,[s]),resetLocalColumns:C}}var xe=e=>(a,n)=>{const o=r.useRef(!1);e(()=>()=>{o.current=!1},[]),e(()=>{if(o.current)return a();o.current=!0},n)},Ce=xe(r.useEffect),Re=xe(function(e,a,n){const[o,m]=r.useState({}),{run:s,cancel:P}=function(C,x){var T;const y=r.useRef(C);y.current=C;const c=(T=x==null?void 0:x.wait)!=null?T:1e3,h=me(()=>G.default((...W)=>y.current(...W),c,x),[]);return r.useEffect(()=>{h.cancel()},[]),{run:h,cancel:h.cancel,flush:h.flush}}(()=>{m({})},n);r.useEffect(()=>s(),a),r.useEffect(P,[]),Ce(e,[o])}),ye=new Set,ze={errorOnce(e){ye.has(e)||(ye.add(e),console.error(e))}},Pe=120;function be(e){const{columns:a,defaultWidth:n=Pe,minConstraints:o=n/2,maxConstraints:m=Number.POSITIVE_INFINITY,cache:s=!0,columnsState:P,onResizeStart:C,onResizeEnd:x,tooltipRender:T}=e;(function(l){return!(!l||!l.length)&&l.every(t=>!(t.children&&t.children.length||!t.width))})(a)&&ze.errorOnce("[use-antd-resizable-header] \u8BF7\u4E0D\u8981\u5728\u6240\u6709\u5217\u4E0A\u6DFB\u52A0 `width` \u5C5E\u6027\uFF0C\u8FD9\u5C06\u5BFC\u81F4\u8868\u683C\u65E0\u6CD5\u81EA\u9002\u5E94");const y=r.useRef(new Map),[c,h]=ie(a||[]),W=function(l){const t=r.useRef(l);return t.current=l,t}(c),{localColumns:$,resetLocalColumns:L}=we({columnsState:P,columns:a,resizableColumns:c}),[q,_]=ie(),[ee,le]=r.useReducer(l=>l+1,0);let S;const ne=X(()=>{S=new Map,y.current=S,L()}),N=r.useCallback(l=>t=>{t&&h(d=>{const v=function(b,R,f){const M=[...b];return function z(g){if(g)for(let O=0;O<(g==null?void 0:g.length);O++){if(R(g[O]))return void(g[O]=E(A({},g[O]),{width:f}));g[O].children&&z(g[O].children)}}(M),M}(d,b=>b[D]===l&&!!b.width&&!b.hideInTable,t);return S=S||new Map,function b(R){var f;for(let M=0;M<R.length;M++){const z=R[M];if(z.hideInTable)continue;const g=z[D];S.set((f=String(g))!=null?f:"",{width:z==null?void 0:z.width,index:M}),z!=null&&z.children&&b(z.children)}}(v),y.current=S,v})},[]),F=r.useMemo(()=>N,[N]),J=l=>t=>{C==null||C(E(A({},l),{width:t,resizableColumns:W.current}))},oe=l=>t=>{x==null||x(E(A({},l),{width:t,resizableColumns:W.current}))},k=X(l=>(l==null?void 0:l.filter(t=>!ce(t))).map(t=>{var d,v,b,R;return E(A({},t),{children:(d=t==null?void 0:t.children)!=null&&d.length?k(t.children):void 0,onHeaderCell:f=>{var M,z,g,O;return E(A({},(M=t.onHeaderCell)==null?void 0:M.call(t,f)),{"data-index":f.dataIndex,title:typeof(t==null?void 0:t.title)=="string"?t==null?void 0:t.title:"",width:s&&((O=(g=y.current)==null?void 0:g.get((z=f[D])!=null?z:""))==null?void 0:O.width)||(f==null?void 0:f.width),resizable:f.resizable,onMount:N(f==null?void 0:f[D]),onResize:F(f==null?void 0:f[D]),onResizeStart:J(f),onResizeEnd:oe(f),minWidth:o,maxWidth:m,hideInTable:f.hideInTable,tooltipRender:T,triggerRender:ee})},width:s&&((R=(b=y.current)==null?void 0:b.get((v=t[D])!=null?v:""))==null?void 0:R.width)||(t==null?void 0:t.width),[D]:t[D]||t.key})}));he(()=>{if($){const l=k($);h(l)}},[$]),Re(()=>{const l=k(c);h(l)},[ee],{wait:500}),he(()=>{let l=0;(function t(d){for(let v=0;v<d.length;v++)d[v].children?t(d[v].children):d[v].hideInTable||(l+=Number(d[v].width)||n)})(c),_(l)},[n,c]);const{run:Y}=function(l,t){var d;const v=r.useRef(l);v.current=l;const b=(d=t==null?void 0:t.wait)!=null?d:1e3,R=me(()=>U.default((...f)=>v.current(...f),b,t),[]);return r.useEffect(()=>{R.cancel()},[]),{run:R,cancel:R.cancel,flush:R.flush}}(le);r.useEffect(()=>(window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y)}),[Y]);const u=r.useMemo(()=>({header:{cell:Te}}),[]);return{resizableColumns:c,components:u,tableWidth:q,resetColumns:ne}}var Ae=be;I.ResizableUniqIdPrefix=fe,I.default=Ae,I.useAntdResizableHeader=be}}]);
